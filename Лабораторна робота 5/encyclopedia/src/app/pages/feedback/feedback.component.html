<header>
  <h1>Зворотній зв’язок</h1>
</header>

<main>
  <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
    <fieldset>
      <legend>Персональна інформація</legend>

      <div class="form-row">
        <label for="fullname">Прізвище та ім’я:</label>
        <input id="fullname" type="text" formControlName="fullname">
        @if (f.fullname.touched && f.fullname.invalid) {
          <div class="error">Вкажіть ім’я.</div>
        }
      </div>

      <div class="form-row">
        <label for="email">E-mail:</label>
        <input id="email" type="email" formControlName="email">
        @if (f.email.touched && f.email.invalid) {
          <div class="error">Вкажіть коректну електронну адресу.</div>
        }
      </div>

      <div class="form-row">
        <label for="age">Вік:</label>
        <input id="age" type="number" formControlName="age">
        @if (f.age.touched && f.age.invalid) {
          <div class="error">Вік повинен бути від 5 до 120.</div>
        }
      </div>

      <div class="form-row">
        <label for="education">Освіта:</label>
        <select id="education" formControlName="education">
          <option value="">Оберіть...</option>
          <option value="повна">Повна</option>
          <option value="неповна">Неповна</option>
          <option value="вища">Вища</option>
          <option value="професійна">Професійна</option>
        </select>
        @if (f.education.touched && f.education.invalid) {
          <div class="error">Виберіть освіту.</div>
        }
      </div>
    </fieldset>

    <div class="form-row">
      <label for="purpose">Мета зворотнього зв’язку:</label>
      <select id="purpose" formControlName="purpose">
        <option value="">Оберіть...</option>
        <option value="співпраця">Співпраця</option>
        <option value="скарга">Скарга на порушення права власності</option>
        <option value="пропозиція">Пропозиція</option>
        <option value="помилка">Наявність помилки</option>
      </select>
      @if (f.purpose.touched && f.purpose.invalid) {
        <div class="error">Виберіть мету звернення.</div>
      }
    </div>

    <div class="form-row" style="position: relative;">
      <label for="details">Детально:</label>
      <textarea id="details"
                formControlName="details"
                rows="5" cols="40"
                maxlength="500"
                (mouseenter)="showTooltip = true"
                (mouseleave)="showTooltip = false"></textarea>

      <div class="details-tooltip" [class.show]="showTooltip">
        Ваша думка для нас важлива! Конкретизуйте мету звернення, будь ласка.
      </div>

      <p class="note">* Максимум 500 символів</p>

      @if (f.details.touched && f.details.invalid) {
        <div class="error">Опишіть деталі (до 500 символів).</div>
      }
    </div>

    <div class="form-row">
      <label class="checkbox">
        <input type="checkbox" formControlName="consent">
        Я погоджуюся на обробку моєї інформації
      </label>
      @if (f.consent.touched && f.consent.invalid) {
        <div class="error">Потрібно погодитися.</div>
      }
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="feedbackForm.invalid">Відправити</button>
      <button type="reset">Очистити</button>
    </div>
  </form>
</main>
